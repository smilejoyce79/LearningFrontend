<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>HTML5 Canvas</title>
  <link rel="icon" href="https://fav.farm/ğŸ”¥" />
</head>
<body>
  <canvas id="draw" width="800" height="800"></canvas>
  <script>
    const canvas = document.querySelector('#draw');
    const ctx = canvas.getContext('2d')  //.getContext: åœ¨HTML tag <canvas>å–å¾—2dç¹ªåœ–ç’°å¢ƒ

    canvas.width = window.innerWidth;   //å°‡å…ƒç´ åŸå¯¬åº¦ç”¨ ç€è¦½å™¨åŸå¯¬åº¦ æ”¹å¯«
    canvas.height = window.innerHeight;  //å°‡å…ƒç´ åŸé«˜åº¦ç”¨ ç€è¦½å™¨é«˜åº¦ æ”¹å¯«

    ctx.strokeStyle = '#BADA55'; //è¨­ç½®æé‚Šçš„é¡è‰²æˆ–æ¨£å¼
    ctx.lineJoin = 'round';  //è¨­ç½®ç·šæ¢äº¤å‰é»çš„æ¨£å¼ï¼Œå¦‚ roundã€bevel æˆ– miterã€‚
    ctx.lineCap = 'round';  //è¨­ç½®ç·šæ¢æœ«ç«¯çš„æ¨£å¼ï¼Œå¯ç‚º buttï¼ˆå¹³æ»‘çµæŸï¼‰ã€roundï¼ˆåœ“å½¢ï¼‰ã€squareï¼ˆæ–¹å½¢ï¼‰ã€‚
    ctx.lineWidth = 10; //ç­†åˆ·å¯¬åº¦
    ctx.globalCompositeOperation = 'multiply'; // è¨­ç½®æ··è‰²æ¨¡å¼/darken/lighten...ç­‰æ•ˆæœ


    let isDrawing = false; //é è¨­ç­†åˆ·ç‹€æ…‹
    let lastX = 0; //é è¨­xè»¸ä½ç½®
    let lastY = 0; //é è¨­yè»¸ä½ç½®
    let hue = 0 ; //é è¨­è‰²å½©    // https://mothereffinghsl.com/
    let direction = true; //é è¨­é–‹å•Ÿç­†åˆ·'ç²—ç´°'æ–¹å‘è®Šæ›åŠŸèƒ½

    function draw(e){
      if(!isDrawing) return; //è‹¥ç­†åˆ·ç‹€æ…‹æœªå•Ÿå‹•(false),ç›´æ¥å›å‚³,åœæ­¢å¾€ä¸‹é‹è¡Œæ­¤å‡½æ•¸
      console.log(e)
      
      ctx.strokeStyle = `hsl(${hue}, 100%, 50%)` //é–‹å§‹è·¯å¾‘å‰,å°‡hueè®Šæ•¸å¸¶å…¥è‰²å½©å€¼, å°æ¯”é®®è±”åº¦100%, äº®åº¦50%
      // ctx.lineWidth = hue;
      ctx.beginPath(); //é–‹å§‹ä¸€æ¢æ–°è·¯å¾‘ï¼Œæ¸…é™¤ç•¶å‰è·¯å¾‘åˆ—è¡¨
      ctx.moveTo(lastX, lastY);   //start from
      ctx.lineTo(e.offsetX, e.offsetY);   //go to
      ctx.stroke();   //ç•«å‡ºè·¯å¾‘çš„é‚Šæ¡†

      // lastX = e.offsetX
      // lastY = e.offsetY
      [lastX,lastY] = [e.offsetX,e.offsetY]

      hue++; //ä¸æ–·å¢åŠ hueçš„è‰²å½©å€¼,ä»¥é”åˆ°'è®Šè‰²'æ•ˆæœ
      // if(hue >= 360){
      //   hue = 0;
      // }

      if (ctx.lineWidth >= 100 || ctx.lineWidth <= 1) {  //ä½¿ç­†åˆ·å¯¬åº¦ä»‹æ–¼åœ¨1~100ä¹‹é–“ä»¥éå¢/éæ¸›çš„æ–¹å‘è®ŠåŒ–
        direction = !direction;
      }
      if(direction) {
        ctx.lineWidth++;
      } else {
        ctx.lineWidth--;
      }
    }

    canvas.addEventListener('mousemove',draw);
    canvas.addEventListener('mousedown',(e)=> {
      isDrawing = true;//æ¸¸æ¨™æŒ‰ä¸‹æ™‚å•Ÿå‹•ç•«ç­†
      [lastX,lastY] = [e.offsetX,e.offsetY] //ä¸¦æ”¹è®Šè·¯å¾‘èµ·å§‹é»åº§æ¨™ä½ç½®
    }); 
    canvas.addEventListener('mouseup',()=> isDrawing = false); //æ¸¸æ¨™æ”¾é–‹æ™‚é—œé–‰ç•«ç­†
    canvas.addEventListener('mouseout',()=> isDrawing = false); //æ¸¸æ¨™æœªæ”¾é–‹,ä½†ä»¥è¶…å‡ºç•«å¸ƒç¯„åœæ™‚ä¹Ÿé—œé–‰ç•«ç­†



  </script>

  <style>
    html, body {
      margin: 0;
    }
  </style>

</body>
</html>
